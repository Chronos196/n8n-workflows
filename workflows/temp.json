{
  "active": false,
  "connections": {
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Set start time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "авторизация": {
      "main": [
        [
          {
            "node": "Set start time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set start time": {
      "main": [
        [
          {
            "node": "получение перевозок4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "получение перевозок4": {
      "main": [
        [
          {
            "node": "Calculate duration1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set start time1": {
      "main": [
        [
          {
            "node": "Odoo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Calculate duration2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Calculate duration": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Odoo": {
      "main": [
        [
          {
            "node": "Calculate duration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-10-02T06:12:26.174Z",
  "id": "zwP3Q1MFVqKmTkog",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "temp",
  "nodes": [
    {
      "parameters": {},
      "id": "cd899800-8d5f-4db2-89b1-0b07085ee51a",
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        220,
        540
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8ed6f8b4-9a13-44f0-96a8-1c77ca5894f9",
              "name": "start",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "1703754c-b1e8-4308-98d9-05a7d5022579",
      "name": "Set start time",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        600,
        180
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://everest.lamart.site/web/session/authenticate",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"call\",\n    \"params\": {\n        \"db\": \"db\",\n        \"login\": \"aleksey.g@lamart.site\",\n        \"password\": \"cXYgjue4D8gVC9A\"\n    }\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "b4bbbbe9-9462-44be-886c-15c7392a3ca0",
      "name": "авторизация",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        380,
        180
      ]
    },
    {
      "parameters": {
        "url": "https://everest.lamart.site/transportations_by_car",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "cookie",
              "value": "={{ $('авторизация').item.json.headers['set-cookie'][0] }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"number_car\": \"А 459 ТЕ\"\n}  ",
        "options": {}
      },
      "id": "f7c886f6-bbaf-40b6-99e1-0b26ec0c1555",
      "name": "получение перевозок4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        820,
        180
      ],
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "values": {
          "number": [
            {
              "name": "seconds",
              "value": "={{ $now.diff(DateTime.fromISO($('Set start time').item.json.start)).as('seconds') }}"
            }
          ]
        },
        "options": {}
      },
      "id": "273398b6-92b1-4308-8763-ae17a63bfc0c",
      "name": "Calculate duration1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [
        1140,
        140
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8ed6f8b4-9a13-44f0-96a8-1c77ca5894f9",
              "name": "start",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "31090641-fbc2-4013-9c74-4aef2939dc1c",
      "name": "Set start time1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        440,
        540
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0924e769-30f5-4878-a17e-e675ab11fbf7",
              "leftValue": "={{ $json.status }}",
              "rightValue": "Завершен",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "eccce815-1efe-4fa1-913e-e901b4cac846",
              "leftValue": "={{ $json.driver[0] }}",
              "rightValue": 2,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "56a24d42-1813-4a05-b001-fec47e565607",
      "name": "Filter",
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        1120,
        540
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "values": {
          "number": [
            {
              "name": "seconds",
              "value": "={{ $now.diff(DateTime.fromISO($('Set start time1').item.json.start)).as('seconds') }}"
            }
          ]
        },
        "options": {}
      },
      "id": "26100bb4-51c5-499a-8fde-3f23e8fd7299",
      "name": "Calculate duration2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [
        1380,
        540
      ]
    },
    {
      "parameters": {
        "values": {
          "number": [
            {
              "name": "seconds",
              "value": "={{ $now.diff(DateTime.fromISO($('Set start time1').item.json.start)).as('seconds') }}"
            }
          ]
        },
        "options": {}
      },
      "id": "e63d15b3-6397-4e37-b4ab-42176992933f",
      "name": "Calculate duration",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [
        880,
        540
      ]
    },
    {
      "parameters": {
        "resource": "custom",
        "customResource": "=hr.employee",
        "operation": "getAll",
        "returnAll": true,
        "options": {}
      },
      "id": "5a8ad362-75f6-4c27-b653-6e71ad110a84",
      "name": "Odoo",
      "type": "n8n-nodes-base.odoo",
      "typeVersion": 1,
      "position": [
        660,
        540
      ],
      "credentials": {
        "odooApi": {
          "id": "ITgOrhO4Hf2QcDtf",
          "name": "odoo dev"
        }
      }
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2024-10-02T06:53:59.519Z",
  "versionId": "a78d0ca3-e854-4c18-b776-3de41fe33c33"
}