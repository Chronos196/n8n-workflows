{"createdAt":"2024-08-30T12:45:06.753Z","updatedAt":"2024-08-30T12:45:09.595Z","id":"EbMa8304cTQcs0Gy","name":"prod_logist","active":false,"nodes":[{"parameters":{"content":"## Блок сценария для логиста","height":862.4168334078684,"width":1267.9135979457083},"id":"3b3e252f-d218-4c30-832c-93457e70996c","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1500,460]},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"Здравствуй, дорогой логист, приступим к работе?","replyMarkup":"replyKeyboard","replyKeyboard":{"rows":[{"row":{"buttons":[{"text":"Просмотреть свободные машины","additionalFields":{}}]}},{"row":{"buttons":[{"text":"Оповещение","additionalFields":{}}]}}]},"replyKeyboardOptions":{"resize_keyboard":true},"additionalFields":{"appendAttribution":false}},"id":"37c61b3f-85ca-4198-8461-022de8c10537","name":"Приветственное сообщений","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[1640,580],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"Сейчас свободны следующие автомобили:","additionalFields":{"appendAttribution":false}},"id":"f74e361c-773e-4fdd-97c1-c82600bd23fa","name":"Проверка свободных машин","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2020,580],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"=<b>{{ $json.number_car }}, {{ $json.employee_id[1] }}</b>","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"2aabc77f-5acc-42cc-9b49-91d8bdb32940","name":"Вывод свободных машин","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2500,580],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"resource":"custom","customResource":"cars.cars","operation":"getAll","returnAll":true,"options":{"fieldsList":[]},"filterRequest":{"filter":[{"fieldName":"status","value":"Нет груза"}]}},"id":"aee2f16e-26b3-4c4e-a34d-5834911ca5f1","name":"Поиск машин со статусом Нет груза","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[2260,580],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"content":"## Вывод свободных машин","height":273.8075573041622,"width":779.3488585284206,"color":5},"id":"aeda9121-b46e-48ec-945c-c8f6504e50f9","name":"Sticky Note18","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1900,540]},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"Выберите вариант оповещения водителей:","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Оповестить всех","additionalFields":{"callback_data":"logist_alert_all"}}]}},{"row":{"buttons":[{"text":"Оповестить по выбранному получателю","additionalFields":{"callback_data":"logist_alert_transportation"}}]}},{"row":{"buttons":[{"text":"Оповестить конкретный автомобиль","additionalFields":{"callback_data":"logist_alert_auto"}}]}}]},"additionalFields":{"appendAttribution":false}},"id":"e91abecf-19b7-4c6a-8878-7a0791b6094e","name":"кнопка оповещения","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2040,1000],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"11c45e0d-196b-47f1-821e-bee57c9f070b","leftValue":"={{ $json.message.text }}","rightValue":"","operator":{"type":"string","operation":"exists","singleValue":true}}],"combinator":"and"},"options":{}},"id":"f04086ac-1a01-428f-8a48-b365ae72c88c","name":"проверка типа сообщения","type":"n8n-nodes-base.if","typeVersion":2,"position":[1140,1080]},{"parameters":{"errorMessage":"123"},"id":"e2a09d0a-4d69-442e-86cd-befbb32cb70c","name":"Stop and Error","type":"n8n-nodes-base.stopAndError","typeVersion":1,"position":[960,1280],"disabled":true},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.message_id }}","replyMarkup":"inlineKeyboard","text":"Введите текст сообщения для всех водителей:","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Назад","additionalFields":{"callback_data":"back_to_alert_menu"}}]}}]},"additionalFields":{}},"id":"79422d3b-4f48-404e-b8ef-866fd4d2dcbd","name":"введите текст для всех","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[1600,1480],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"tg_id":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","status":"inputing_alert_for_all"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}]},"options":{}},"id":"d1be8f0f-ac49-4e9e-9b84-dbd9ac12e61e","name":"статус=ввод оповещения для всех","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[1800,1480],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.message_id }}","replyMarkup":"inlineKeyboard","text":"Выберите вариант оповещения водителей:","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Оповестить всех","additionalFields":{"callback_data":"logist_alert_all"}}]}},{"row":{"buttons":[{"text":"Оповестить по выбранной перевозке","additionalFields":{"callback_data":"logist_alert_transportation"}}]}},{"row":{"buttons":[{"text":"Оповестить конкретный автомобиль","additionalFields":{"callback_data":"logist_alert_auto"}}]}}]},"additionalFields":{}},"id":"d7e2b219-0643-40f9-9449-13c4b7468fa9","name":"кнопка оповещения1","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[1600,1860],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"select","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"returnAll":true,"where":{"values":[{"column":"odoo_id","value":"={{ $json.driver_id[0] }}"}]},"options":{}},"id":"d81ddf15-8099-4608-ae4d-54d9e8412878","name":"айди водителей","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[1800,2040],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('айди водителей').item.json.tg_id }}","text":"=Оповещение от логиста:\n<i>{{ $('Execute Workflow Trigger').item.json.logist_alert_text }}</i>","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"7c7b2c43-5405-4a33-92ed-df19ec6e4ecb","name":"рассылка","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2040,2040],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"tg_id":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","status":"authorized","logist_alert_text":"={{ $('Execute Workflow Trigger').item.json.message.text }}"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_alert_text","displayName":"logist_alert_text","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}]},"options":{}},"id":"42b0d758-07bb-4787-ac50-fdd151e04c63","name":"сохраним текст логиста","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[3720,1440],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"content":"## Оповещения для всех водителей на смене","height":799.4991199079257,"width":1321.0782113186833,"color":6},"id":"48f77542-e0b8-422f-bbdf-c826816089c8","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1520,1420]},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"078fc99a-9f10-4fc4-b852-36e5e0e055ef","name":"преобразуем в 1 переменную","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[2280,2040]},{"parameters":{"resource":"custom","customResource":"transportation.transportation","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"date","value":"={{ $today }}"}]}},"id":"117a9aad-12ba-404e-8982-8baf222d2688","name":"все сегодняшние перевозки","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1600,1680],"alwaysOutputData":true,"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"compare":"selectedFields","fieldsToCompare":"partner[1]","options":{}},"id":"e525367e-1850-497e-bcb5-fbda2ced63dd","name":"получим получателей без дубликатов","type":"n8n-nodes-base.removeDuplicates","typeVersion":1,"position":[2040,1620]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"6d3ef479-f9d1-4c48-9141-f8120a69fece","leftValue":"={{ $json }}","rightValue":"","operator":{"type":"object","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"id":"7c319824-2f10-4301-8155-babb734f9ed8","name":"проверка наличия перевозок","type":"n8n-nodes-base.if","typeVersion":2,"position":[1800,1680]},{"parameters":{"resource":"callback","queryId":"={{ $('Execute Workflow Trigger').item.json.callback_query.id }}","additionalFields":{"show_alert":true,"text":"Перевозки на сегодня не найдены"}},"id":"f1f3c8c3-f0d0-4f61-bea4-3fa085ff06cf","name":"заявки не найдены","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2040,1800],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"jsCode":"const items = $input.all();\n\nconst buttons = items.map((item, index) => ({\n    text: `${item.json.partner[1]}`,\n    callback_data: `AT_${item.json.partner[1]}` // AT - alert transportation\n}));\n\nconst inlineKeyboard = {\n    inline_keyboard: buttons.map(button => [button])\n};\nconst chatId = $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id \nconst token = '7062531188:AAFkpyOiRuXLHFQO8mWKHuftPGglQSruqwo';\nconst url = `https://api.telegram.org/bot${token}/sendMessage`;\n\nconst message = {\n    chat_id: chatId,\n    text: \"Нажмите на получателя\",\n    reply_markup: inlineKeyboard\n};\n\n// Возвращаем данные для запроса\nreturn [\n    {\n        json: {\n            url,\n            message\n        }\n    }\n];\n"},"id":"025058ab-622a-4584-95ac-cc92c31e83a5","name":"создаём динамически инлайн кнопки","type":"n8n-nodes-base.code","typeVersion":2,"position":[2260,1620]},{"parameters":{"method":"POST","url":"={{ $json.url }}","sendBody":true,"specifyBody":"json","jsonBody":"={{ $json.message }}","options":{}},"id":"201aba7d-efd9-4536-ac04-e6c11e00c4f9","name":"отправляем сообщение","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2480,1620]},{"parameters":{"operation":"deleteMessage","chatId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.message_id }}"},"id":"15c1ad43-4460-4d92-b27e-77b9baaa6df1","name":"удаляем прошлое сообщение с заявками","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2700,1620],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.message_id }}","replyMarkup":"inlineKeyboard","text":"=Вы выбрали получателя <b>{{ $json[\"AT_name\"] }}</b>. Введите текст сообщения для водителей:","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Назад","additionalFields":{"callback_data":"logist_alert_transportation"}}]}}]},"additionalFields":{"parse_mode":"HTML"}},"id":"c9393424-1e31-484a-b8b1-e92b0641af22","name":"введите текст для получателя","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[1880,2980],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"assignments":{"assignments":[{"id":"92ad7c1c-cd84-4fc3-bf35-ca59aedad2a0","name":"AT_name","value":"={{ $json.callback_query.data.substring(3) }}","type":"string"}]},"options":{}},"id":"8b43bfe6-2ca4-4760-a830-b30cf5968aa8","name":"название получателя","type":"n8n-nodes-base.set","typeVersion":3.3,"position":[1640,2980]},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"status":"inputing_alert_for_transportation","tg_id":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","logist_recipient_name":"={{ $('название получателя').item.json.AT_name }}"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_alert_text","displayName":"logist_alert_text","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_recipient_name","displayName":"logist_recipient_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}]},"options":{}},"id":"d7ed0280-f3fa-43b1-bf01-ef2f1ab60333","name":"статус=ввод сообщения для получателя","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[2100,2980],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"=<b>Действительно хотите оповестить всех водителей по выбранному получателю?</b>\n\nВаше сообщение:\n<i>{{ $('Execute Workflow Trigger').item.json.message.text }}</i>","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Оповестить","additionalFields":{"callback_data":"alert_transportation"}}]}},{"row":{"buttons":[{"text":"Вернуться к выбору","additionalFields":{"callback_data":"back_to_alert_menu"}}]}}]},"additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"063af5f8-b52b-49d0-ac64-96f0941b8df1","name":"оповестить по перевозке?","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3240,1440],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"tg_id":"={{ $('Execute Workflow Trigger').item.json.inline_chat_id }}","status":"authorized"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}]},"options":{}},"id":"612b5f29-01bf-49f2-93f8-48a5293552ff","name":"дефолтный статус","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[1800,1860],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}},"disabled":true},{"parameters":{"resource":"custom","customResource":"transportation.transportation","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"partner","value":"={{ $('Execute Workflow Trigger').item.json.logist_recipient_name }}"},{"fieldName":"date","value":"={{ $today }}"}]}},"id":"f5d6bb22-83cb-4f31-b157-d9a27a79eac5","name":"перевозки по получателю","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1640,3220],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"jsCode":"// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nvar rounds = [];\nfor (const item of $input.all()) {\n  for(const round of item.json.rounds) {\n    rounds.push(round);\n  }\n}\n\nreturn {\"rounds\": rounds};"},"id":"3a394803-2a6b-4a2c-8fe4-2a5428509d9b","name":"все рейсы","type":"n8n-nodes-base.code","typeVersion":2,"position":[1880,3220]},{"parameters":{"resource":"custom","customResource":"cars.cars","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"driver_id","operator":"notEqual","value":"={{ false }}"}]}},"id":"464ebf26-961f-4361-b56d-57fd141f32ac","name":"поиск машин на смене","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1600,2040],"alwaysOutputData":true,"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"resource":"custom","customResource":"cars.cars","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"rounds","value":"={{ $json.rounds }}"},{"fieldName":"driver_id","operator":"notEqual","value":"={{ false }}"}]}},"id":"9412e5c9-d3af-4d75-813e-10f5525f9b37","name":"автомобили по рейсу на смене","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[2100,3220],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"operation":"select","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"returnAll":true,"where":{"values":[{"column":"odoo_id","value":"={{ $json.driver_id[0] }}"}]},"options":{}},"id":"1bc256ee-891d-4929-80ce-34e174335743","name":"айди водителей1","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[2340,3220],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('айди водителей1').item.json.tg_id }}","text":"=Оповещение от логиста:\n<i>{{ $('Execute Workflow Trigger').all()[0].json.logist_alert_text }}</i>","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"d181e891-3b23-4982-aedb-c55b37a5eff0","name":"рассылка1","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2560,3220],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"703b6711-ae79-43f6-bb7d-30ec897fe235","name":"преобразуем в 1 переменную1","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[2800,3220]},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.message_id }}","text":"Сообщение будет доставлено всем водителям с выбранным получателем","additionalFields":{}},"id":"6e0499a9-aaba-447a-a425-537f84245162","name":"изменяем сообщение1","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3020,3220],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"content":"## Оповещения по получателю","height":496.20554104438617,"width":1722.0426037145492,"color":6},"id":"097a9d1b-a7d7-478f-acd2-3125d57a3621","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1580,2920]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"leftValue":"={{ $json.message.text }}","rightValue":"={{ \"/start\" }}","operator":{"type":"string","operation":"equals"}}],"combinator":"and"}}]},"options":{"fallbackOutput":"extra"}},"id":"b8c73257-c3c7-48da-965c-fa9088b4d696","name":"Проверка старта1","type":"n8n-nodes-base.switch","typeVersion":3,"position":[1520,980]},{"parameters":{"resource":"custom","customResource":"transportation.transportation","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"date","value":"={{ $today }}"}]}},"id":"ee52bc7b-ffd0-44c2-b4b8-606e1801ffab","name":"все сегодняшние перевозки1","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1620,2420],"alwaysOutputData":true,"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"6d3ef479-f9d1-4c48-9141-f8120a69fece","leftValue":"={{ $json }}","rightValue":"","operator":{"type":"object","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"id":"26abaca5-f3e2-4a2d-a4ac-cd9aec89606c","name":"проверка наличия перевозок1","type":"n8n-nodes-base.if","typeVersion":2,"position":[1820,2420]},{"parameters":{"resource":"callback","queryId":"={{ $('Execute Workflow Trigger').item.json.callback_query.id }}","additionalFields":{"show_alert":true,"text":"Перевозки на сегодня не найдены"}},"id":"c16fcebc-5e0a-4fd8-b8f0-43058886487d","name":"заявки не найдены1","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2060,2540],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"compare":"selectedFields","fieldsToCompare":"partner[1]","options":{}},"id":"2075eee7-0db0-4e64-a51e-a733b75cb466","name":"получим получателей без дубликатов1","type":"n8n-nodes-base.removeDuplicates","typeVersion":1,"position":[2060,2360]},{"parameters":{"jsCode":"const items = $input.all();\n\nconst buttons = items.map((item, index) => ({\n    text: `${item.json.partner[1]}`,\n    callback_data: `CT_${item.json.partner[1]}` // CT - Choise Transportation for auto alert\n}));\n\nconst inlineKeyboard = {\n    inline_keyboard: buttons.map(button => [button])\n};\nconst chatId = $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id \nconst token = '7062531188:AAFkpyOiRuXLHFQO8mWKHuftPGglQSruqwo';\nconst url = `https://api.telegram.org/bot${token}/sendMessage`;\n\nconst message = {\n    chat_id: chatId,\n    text: \"Чтобы найти автомобиль, выберите получателя:\",\n    reply_markup: inlineKeyboard\n};\n\n// Возвращаем данные для запроса\nreturn [\n    {\n        json: {\n            url,\n            message\n        }\n    }\n];\n"},"id":"0c37d632-d490-4c22-a9c5-3e9f13979e01","name":"создаём динамически инлайн кнопки1","type":"n8n-nodes-base.code","typeVersion":2,"position":[2280,2360]},{"parameters":{"method":"POST","url":"={{ $json.url }}","sendBody":true,"specifyBody":"json","jsonBody":"={{ $json.message }}","options":{}},"id":"c7239aaf-8233-4be8-b708-c1def4721b80","name":"отправляем сообщение1","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2500,2360]},{"parameters":{"operation":"deleteMessage","chatId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.message_id }}"},"id":"2554eda1-b76d-403d-9c2d-8fbbb3d156c2","name":"удаляем прошлое сообщение с заявками1","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2720,2360],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"resource":"custom","customResource":"transportation.transportation","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"partner","value":"={{ $json.callback_query.data.substring(3) }}"},{"fieldName":"date","value":"={{ $today }}"}]}},"id":"76f8760b-7298-43a3-b94a-5109b72c06c1","name":"перевозки по получателю1","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1620,3589],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"jsCode":"// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nvar rounds = [];\nfor (const item of $input.all()) {\n  for(const round of item.json.rounds) {\n    rounds.push(round);\n  }\n}\n\nreturn {\"rounds\": rounds};"},"id":"59d9276c-13a5-4663-977c-c1e34af60239","name":"все рейсы1","type":"n8n-nodes-base.code","typeVersion":2,"position":[1860,3589]},{"parameters":{"resource":"custom","customResource":"cars.cars","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"rounds","value":"={{ $json.rounds }}"},{"fieldName":"driver_id","operator":"notEqual","value":"={{ false }}"}]}},"id":"54c23288-c8ce-4d00-85d6-4eacd96702e6","name":"автомобили по рейсу на смене1","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[2100,3589],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"jsCode":"const items = $input.all();\n\nconst buttons = items.map((item, index) => ({\n    text: `${item.json.number_car}`,\n    callback_data: `AA_${item.json.number_car}` // AA - Alert Auto\n}));\n\nconst inlineKeyboard = {\n    inline_keyboard: buttons.map(button => [button])\n};\nconst chatId = $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id \nconst token = '7062531188:AAFkpyOiRuXLHFQO8mWKHuftPGglQSruqwo';\nconst url = `https://api.telegram.org/bot${token}/sendMessage`;\n\nvar partner = $('Execute Workflow Trigger').all()[0].json.callback_query.data.substring(3);\n\nconst message = {\n    chat_id: chatId,\n    text: \"Текущие автомобили на смене с получателем <b>\" + partner + \"</b>:\",\n    reply_markup: inlineKeyboard,\n    parse_mode: \"html\",\n};\n\n// Возвращаем данные для запроса\nreturn [\n    {\n        json: {\n            url,\n            message,\n        }\n    }\n];\n"},"id":"62f8c934-d34d-4380-8768-cc759a77049c","name":"создаём динамически инлайн кнопки2","type":"n8n-nodes-base.code","typeVersion":2,"position":[2360,3589]},{"parameters":{"method":"POST","url":"={{ $json.url }}","sendBody":true,"specifyBody":"json","jsonBody":"={{ $json.message }}","options":{}},"id":"683cb142-58dd-4f74-b415-2de451576c2c","name":"отправляем сообщение2","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[2580,3589]},{"parameters":{"operation":"deleteMessage","chatId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.message_id }}"},"id":"09f60333-5918-428b-90dd-72c949961b2d","name":"удаляем прошлое сообщение с заявками2","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2980,3600],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"leftValue":"={{ $json.message.text }}","rightValue":"Просмотреть свободные машины","operator":{"type":"string","operation":"equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"34002e05-61b0-40d3-884d-45ed94368732","leftValue":"={{ $json.message.text }}","rightValue":"Оповещение","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{"fallbackOutput":"extra"}},"id":"f6b3791c-568d-432e-9526-f52bfc55a251","name":"Проверка кнопок","type":"n8n-nodes-base.switch","typeVersion":3,"position":[1760,1000]},{"parameters":{"content":"## Выбор получателя при оповещении конкретного авто","height":458.39652118337546,"width":1328.4103837921157,"color":6},"id":"5c18b6fe-6239-475c-8d6b-24fbb3ea6b52","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1540,2280]},{"parameters":{"content":"## Выбор авто при оповещении конкретного авто","height":291.3280243517646,"width":1517.8363177636575,"color":6},"id":"77e9e986-557c-47cd-8331-5d2a0d8ceb53","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1600,3500]},{"parameters":{"content":"## Сокращения\nAT - alert transportation - оповещение по получателю\nCT - Choise Transportation - оповещение по конкретному авто\nAA - Alert Auto - оповещение по конкретному авто","width":385.0592683521705,"color":4},"id":"9b4dd37a-b548-4554-8c23-b85461945870","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[460,460]},{"parameters":{"resource":"custom","customResource":"cars.cars","operation":"getAll","returnAll":true,"options":{},"filterRequest":{"filter":[{"fieldName":"number_car","value":"={{ $json.callback_query.data.substring(3) }}"}]}},"id":"52e3c769-e6f4-4167-9f6d-12794adb72d4","name":"данные авто","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1620,3880],"alwaysOutputData":true,"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"resource":"custom","customResource":"hr.employee","operation":"get","customResourceId":"={{ $json.driver_id[0] }}","options":{"fieldsList":["mobile_phone"]}},"id":"bff052e5-4176-497b-afa3-9d420e4f6d7c","name":"номер телефона","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1840,3880],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"leftValue":"={{ $json.callback_query.data }}","rightValue":"logist_alert_all","operator":{"type":"string","operation":"equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"424c6e2a-a988-406f-9a0a-13a079991adb","leftValue":"={{ $json.callback_query.data }}","rightValue":"logist_alert_transportation","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"89372a57-be12-40be-9a51-4fa9938c8205","leftValue":"={{ $json.callback_query.data }}","rightValue":"back_to_alert_menu","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"16d7aef0-6c20-4f44-a9ee-46c21e2a786f","leftValue":"={{ $json.callback_query.data }}","rightValue":"alert_all","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"5b842fea-b857-45e2-95ad-6e5dc9d17200","leftValue":"={{ $json.callback_query.data }}","rightValue":"logist_alert_auto","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{"fallbackOutput":"extra"}},"id":"1a3306f6-b288-4a88-8ea0-9e6237cba0a8","name":"инлайн кнопки для логиста","type":"n8n-nodes-base.switch","typeVersion":3,"position":[1340,1760]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"leftValue":"={{ $json.status }}","rightValue":"inputing_alert_for_all","operator":{"type":"string","operation":"equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"14da08f2-eaa2-4a05-a2ec-e02fa0ec245d","leftValue":"={{ $json.status }}","rightValue":"inputing_alert_for_transportation","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"63789235-8337-4a36-b64f-d3c931980c3d","leftValue":"={{ $json.status }}","rightValue":"inputing_alert_for_auto","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"id":"29d5c7b8-bc74-429b-b792-f50c6619d365","name":"проверка статуса","type":"n8n-nodes-base.switch","typeVersion":3,"position":[3000,1440]},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.message.message_id -1 }}","text":"Введите текст сообщения для всех водителей:","additionalFields":{}},"id":"66c970b6-a943-44ac-8342-55fd6e2b1d7c","name":"убираем кнопку назад","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3460,1240],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}},"onError":"continueRegularOutput"},{"parameters":{},"id":"9e2b0e15-6d5a-4d6f-8597-2cfa4086ac4d","name":"Execute Workflow Trigger","type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1,"position":[600,1120]},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.message.message_id -1 }}","text":"=Вы выбрали получателя <b>{{ $('Execute Workflow Trigger').item.json.logist_recipient_name }}</b>. Введите текст сообщения для водителей:","additionalFields":{"parse_mode":"HTML"}},"id":"6735f590-fdab-4a4a-9c5e-4fa39098e7a6","name":"убираем кнопку назад1","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3460,1440],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}},"onError":"continueRegularOutput"},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"=<b>Действительно хотите оповестить всех водителей?</b>\n\nВаше сообщение:\n<i>{{ $('Execute Workflow Trigger').item.json.message.text }}</i>","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Оповестить","additionalFields":{"callback_data":"alert_all"}}]}},{"row":{"buttons":[{"text":"Вернуться к выбору","additionalFields":{"callback_data":"back_to_alert_menu"}}]}}]},"additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"c6cb60d3-a3ce-40b6-88c1-6d6bb8ea195d","name":"действительно оповестить всех?","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3240,1240],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.message_id }}","text":"Сообщение будет доставлено всем водителям на смене","additionalFields":{}},"id":"eb73b0a2-def2-43ef-911c-985013a2b2f0","name":"изменяем сообщение","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2500,2040],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","text":"=<b>Действительно хотите оповестить водителя?</b>\n\nВаше сообщение:\n<i>{{ $('Execute Workflow Trigger').item.json.message.text }}</i>","replyMarkup":"inlineKeyboard","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Оповестить","additionalFields":{"callback_data":"alert_auto"}}]}},{"row":{"buttons":[{"text":"Вернуться к выбору","additionalFields":{"callback_data":"back_to_alert_menu"}}]}}]},"additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"84a26e66-9cb3-4dc5-9767-9328c1fbea87","name":"оповестить по водителю?","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3240,1660],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"content":"## Данные водителя","height":291.3280243517646,"width":859.843468703775,"color":6},"id":"5ac8ea3c-39a8-4735-81c0-74a29dcb4c69","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1600,3820]},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"tg_id":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id }}","logist_recipient_name":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.data }}"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_alert_text","displayName":"logist_alert_text","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_recipient_name","displayName":"logist_recipient_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"transportation_for_certificate","displayName":"transportation_for_certificate","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"count_weight_photo","displayName":"count_weight_photo","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"count_weight_photo_sent","displayName":"count_weight_photo_sent","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true}]},"options":{}},"id":"ca470c20-60d8-486f-bdb4-e690f7f461c7","name":"сохраним получателя","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[2780,3580],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.message_id }}","replyMarkup":"inlineKeyboard","text":"=Текущий водитель {{ $('данные авто').item.json.number_car }}:\n{{ $('данные авто').item.json.driver_id[1] }} <a href=\"tel:{{ $json.mobile_phone }}\">{{ $json.mobile_phone }}</a>\n\nВведите текст сообщения:","inlineKeyboard":{"rows":[{"row":{"buttons":[{"text":"Назад","additionalFields":{"callback_data":"={{ $('Execute Workflow Trigger').item.json.logist_recipient_name }}"}}]}}]},"additionalFields":{"parse_mode":"HTML"}},"id":"32b8d0eb-ecb3-477a-b560-53594808173e","name":"Введите текст","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2060,3880],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"deleteMessage","chatId":"={{ $('Execute Workflow Trigger').item.json.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').item.json.message.message_id -1 }}"},"id":"2a357c27-4b84-4e8f-b784-40356e1c7ce4","name":"убираем кнопку назад2","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[3460,1660],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}},"onError":"continueRegularOutput"},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"tg_id":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","status":"inputing_alert_for_auto","logist_recipient_name":"={{ $('данные авто').item.json.driver_id[0] }}"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_alert_text","displayName":"logist_alert_text","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_recipient_name","displayName":"logist_recipient_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"transportation_for_certificate","displayName":"transportation_for_certificate","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"count_weight_photo","displayName":"count_weight_photo","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"count_weight_photo_sent","displayName":"count_weight_photo_sent","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true}]},"options":{}},"id":"45c3e825-c2c7-48ee-8834-af3f663f753c","name":"обновим статус","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[2280,3880],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"leftValue":"={{ $json.callback_query.data }}","rightValue":"={{ \"AT_\" }}","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"954e80e5-89fc-4093-b0dc-fa39a23981d8","leftValue":"={{ $json.callback_query.data }}","rightValue":"alert_transportation","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"a0342fdb-9d78-4568-a12f-78a834e4beb3","leftValue":"={{ $json.callback_query.data }}","rightValue":"={{ \"CT_\" }}","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"46c02646-5c28-434d-9b36-e7122502fcd6","leftValue":"={{ $json.callback_query.data }}","rightValue":"={{ \"AA_\" }}","operator":{"type":"string","operation":"startsWith"}}],"combinator":"and"}},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"4b24e9f4-fcd8-46b6-a853-71cb4b316917","leftValue":"={{ $json.callback_query.data }}","rightValue":"alert_auto","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"}}]},"options":{}},"id":"1621aee5-195a-4361-b68e-74b4d0e7b3d5","name":"выбор получателя","type":"n8n-nodes-base.switch","typeVersion":3,"position":[1360,3260]},{"parameters":{"operation":"select","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"returnAll":true,"where":{"values":[{"column":"odoo_id","value":"={{ $json.logist_recipient_name }}"}]},"options":{}},"id":"01657935-6c43-4729-89e7-b2956bafbac9","name":"айди водителей2","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[1620,4240],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"chatId":"={{ $('айди водителей2').item.json.tg_id }}","text":"=Оповещение от логиста {{ $json.display_name }}:\n<i>{{ $('Execute Workflow Trigger').all()[0].json.logist_alert_text }}</i>","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"id":"48d3595d-a2e6-402b-b0f9-e54d0bf84167","name":"рассылка2","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2060,4240],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"a0d122fc-84e9-4045-a110-f1e54636513a","name":"преобразуем в 1 переменную2","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[2300,4240]},{"parameters":{"operation":"editMessageText","chatId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.chat.id }}","messageId":"={{ $('Execute Workflow Trigger').all()[0].json.callback_query.message.message_id }}","text":"Сообщение будет доставлено водителю","additionalFields":{}},"id":"894f97e0-9d78-4be6-9142-6c641c705870","name":"изменяем сообщение2","type":"n8n-nodes-base.telegram","typeVersion":1.1,"position":[2520,4240],"credentials":{"telegramApi":{"id":"s2yURwRj0JIo9urH","name":"Everest production"}}},{"parameters":{"operation":"update","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"tg_users","mode":"list","cachedResultName":"tg_users"},"columns":{"mappingMode":"defineBelow","value":{"tg_id":"={{ $('Execute Workflow Trigger').item.json.callback_query.message.chat.id }}","status":"authorized","logist_alert_text":"={{ null }}","logist_recipient_name":"={{null}}"},"matchingColumns":["tg_id"],"schema":[{"id":"tg_id","displayName":"tg_id","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"odoo_id","displayName":"odoo_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"only_mech","displayName":"only_mech","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"mech_photo","displayName":"mech_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_id","displayName":"end_request_id","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"materials_photo","displayName":"materials_photo","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true,"removed":true},{"id":"end_request_hours","displayName":"end_request_hours","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"car_id_while_inputing","displayName":"car_id_while_inputing","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"fuel_liters","displayName":"fuel_liters","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"weight_measure","displayName":"weight_measure","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"logist_alert_text","displayName":"logist_alert_text","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"logist_recipient_name","displayName":"logist_recipient_name","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"transportation_for_certificate","displayName":"transportation_for_certificate","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"count_weight_photo","displayName":"count_weight_photo","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true},{"id":"count_weight_photo_sent","displayName":"count_weight_photo_sent","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"removed":true}]},"options":{}},"id":"1cfdff81-ee16-4623-b692-b4f1abccd8d5","name":"очищаем лишнее","type":"n8n-nodes-base.postgres","typeVersion":2.3,"position":[2720,4240],"credentials":{"postgres":{"id":"cMlKL7XYShZtUnqo","name":"Everest production"}}},{"parameters":{"content":"## Рассылка конкретному водителю","height":291.3280243517646,"width":1062.8959494683481,"color":6},"id":"2d41391f-16ff-4360-9431-199959531add","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1600,4160]},{"parameters":{"resource":"custom","customResource":"hr.employee","operation":"get","customResourceId":"={{ $('Execute Workflow Trigger').item.json.odoo_id }}","options":{}},"id":"f4a189d2-b206-42d7-a711-8df8a97960ea","name":"данные логиста","type":"n8n-nodes-base.odoo","typeVersion":1,"position":[1840,4240],"credentials":{"odooApi":{"id":"8fI2woAI3HZ7dHDv","name":"Odoo production"}}}],"connections":{"Проверка свободных машин":{"main":[[{"node":"Поиск машин со статусом Нет груза","type":"main","index":0}]]},"Поиск машин со статусом Нет груза":{"main":[[{"node":"Вывод свободных машин","type":"main","index":0}]]},"проверка типа сообщения":{"main":[[{"node":"Проверка старта1","type":"main","index":0}],[{"node":"инлайн кнопки для логиста","type":"main","index":0}]]},"введите текст для всех":{"main":[[{"node":"статус=ввод оповещения для всех","type":"main","index":0}]]},"айди водителей":{"main":[[{"node":"рассылка","type":"main","index":0}]]},"рассылка":{"main":[[{"node":"преобразуем в 1 переменную","type":"main","index":0}]]},"преобразуем в 1 переменную":{"main":[[{"node":"изменяем сообщение","type":"main","index":0}]]},"все сегодняшние перевозки":{"main":[[{"node":"проверка наличия перевозок","type":"main","index":0}]]},"получим получателей без дубликатов":{"main":[[{"node":"создаём динамически инлайн кнопки","type":"main","index":0}]]},"проверка наличия перевозок":{"main":[[{"node":"получим получателей без дубликатов","type":"main","index":0}],[{"node":"заявки не найдены","type":"main","index":0}]]},"создаём динамически инлайн кнопки":{"main":[[{"node":"отправляем сообщение","type":"main","index":0}]]},"отправляем сообщение":{"main":[[{"node":"удаляем прошлое сообщение с заявками","type":"main","index":0}]]},"введите текст для получателя":{"main":[[{"node":"статус=ввод сообщения для получателя","type":"main","index":0}]]},"название получателя":{"main":[[{"node":"введите текст для получателя","type":"main","index":0}]]},"кнопка оповещения1":{"main":[[{"node":"дефолтный статус","type":"main","index":0}]]},"оповестить по перевозке?":{"main":[[{"node":"убираем кнопку назад1","type":"main","index":0}]]},"перевозки по получателю":{"main":[[{"node":"все рейсы","type":"main","index":0}]]},"все рейсы":{"main":[[{"node":"автомобили по рейсу на смене","type":"main","index":0}]]},"поиск машин на смене":{"main":[[{"node":"айди водителей","type":"main","index":0}]]},"автомобили по рейсу на смене":{"main":[[{"node":"айди водителей1","type":"main","index":0}]]},"айди водителей1":{"main":[[{"node":"рассылка1","type":"main","index":0}]]},"рассылка1":{"main":[[{"node":"преобразуем в 1 переменную1","type":"main","index":0}]]},"преобразуем в 1 переменную1":{"main":[[{"node":"изменяем сообщение1","type":"main","index":0}]]},"Проверка старта1":{"main":[[{"node":"Приветственное сообщений","type":"main","index":0}],[{"node":"Проверка кнопок","type":"main","index":0}]]},"все сегодняшние перевозки1":{"main":[[{"node":"проверка наличия перевозок1","type":"main","index":0}]]},"проверка наличия перевозок1":{"main":[[{"node":"получим получателей без дубликатов1","type":"main","index":0}],[{"node":"заявки не найдены1","type":"main","index":0}]]},"получим получателей без дубликатов1":{"main":[[{"node":"создаём динамически инлайн кнопки1","type":"main","index":0}]]},"создаём динамически инлайн кнопки1":{"main":[[{"node":"отправляем сообщение1","type":"main","index":0}]]},"отправляем сообщение1":{"main":[[{"node":"удаляем прошлое сообщение с заявками1","type":"main","index":0}]]},"перевозки по получателю1":{"main":[[{"node":"все рейсы1","type":"main","index":0}]]},"все рейсы1":{"main":[[{"node":"автомобили по рейсу на смене1","type":"main","index":0}]]},"создаём динамически инлайн кнопки2":{"main":[[{"node":"отправляем сообщение2","type":"main","index":0}]]},"отправляем сообщение2":{"main":[[{"node":"сохраним получателя","type":"main","index":0}]]},"автомобили по рейсу на смене1":{"main":[[{"node":"создаём динамически инлайн кнопки2","type":"main","index":0}]]},"Проверка кнопок":{"main":[[{"node":"Проверка свободных машин","type":"main","index":0}],[{"node":"кнопка оповещения","type":"main","index":0}],[{"node":"проверка статуса","type":"main","index":0}]]},"данные авто":{"main":[[{"node":"номер телефона","type":"main","index":0}]]},"номер телефона":{"main":[[{"node":"Введите текст","type":"main","index":0}]]},"инлайн кнопки для логиста":{"main":[[{"node":"введите текст для всех","type":"main","index":0}],[{"node":"все сегодняшние перевозки","type":"main","index":0}],[{"node":"кнопка оповещения1","type":"main","index":0}],[{"node":"поиск машин на смене","type":"main","index":0}],[{"node":"все сегодняшние перевозки1","type":"main","index":0}],[{"node":"выбор получателя","type":"main","index":0}]]},"проверка статуса":{"main":[[{"node":"действительно оповестить всех?","type":"main","index":0}],[{"node":"оповестить по перевозке?","type":"main","index":0}],[{"node":"оповестить по водителю?","type":"main","index":0}]]},"убираем кнопку назад":{"main":[[{"node":"сохраним текст логиста","type":"main","index":0}]]},"Execute Workflow Trigger":{"main":[[{"node":"проверка типа сообщения","type":"main","index":0},{"node":"Stop and Error","type":"main","index":0}]]},"убираем кнопку назад1":{"main":[[{"node":"сохраним текст логиста","type":"main","index":0}]]},"действительно оповестить всех?":{"main":[[{"node":"убираем кнопку назад","type":"main","index":0}]]},"оповестить по водителю?":{"main":[[{"node":"убираем кнопку назад2","type":"main","index":0}]]},"сохраним получателя":{"main":[[{"node":"удаляем прошлое сообщение с заявками2","type":"main","index":0}]]},"Введите текст":{"main":[[{"node":"обновим статус","type":"main","index":0}]]},"убираем кнопку назад2":{"main":[[{"node":"сохраним текст логиста","type":"main","index":0}]]},"выбор получателя":{"main":[[{"node":"название получателя","type":"main","index":0}],[{"node":"перевозки по получателю","type":"main","index":0}],[{"node":"перевозки по получателю1","type":"main","index":0}],[{"node":"данные авто","type":"main","index":0}],[{"node":"айди водителей2","type":"main","index":0}]]},"айди водителей2":{"main":[[{"node":"данные логиста","type":"main","index":0}]]},"рассылка2":{"main":[[{"node":"преобразуем в 1 переменную2","type":"main","index":0}]]},"преобразуем в 1 переменную2":{"main":[[{"node":"изменяем сообщение2","type":"main","index":0}]]},"изменяем сообщение2":{"main":[[{"node":"очищаем лишнее","type":"main","index":0}]]},"данные логиста":{"main":[[{"node":"рассылка2","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Execute Workflow Trigger":[{"json":{"update_id":100621927,"message":{"message_id":13177,"from":{"id":7090302459,"is_bot":false,"first_name":"Al","last_name":"Go","language_code":"ru"},"chat":{"id":7090302459,"first_name":"Al","last_name":"Go","type":"private"},"date":1721979002,"text":"/start","entities":[{"offset":0,"length":6,"type":"bot_command"}]},"tg_id":"7090302459","odoo_id":19,"status":"authorized","only_mech":false,"mech_photo":false,"end_request_id":null,"materials_photo":false,"end_request_hours":null,"car_id_while_inputing":null,"fuel_liters":null,"weight_measure":null,"logist_alert_text":null,"logist_recipient_name":null,"transportation_for_certificate":null,"count_weight_photo":null,"count_weight_photo_sent":null,"cookie":"session_id=78f5f11dbc005ee8a33b2b4961110602a991f6b3; Expires=Sat, 26 Jul 2025 07:30:14 GMT; Max-Age=604800; HttpOnly; Path=/"}}]},"versionId":"ae69fe4f-4d88-4bdc-84b1-d83ac6dc2386","triggerCount":0,"tags":[{"createdAt":"2024-08-26T14:50:05.418Z","updatedAt":"2024-08-26T14:50:05.418Z","id":"6aWMzdObOVIXsJ6y","name":"production"}]}